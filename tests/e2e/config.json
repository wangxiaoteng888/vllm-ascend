[
    {
        "test_name": "test_deepseek_dp",
        "disaggregate_prefill": false,
        "num_nodes": 2,
        "server_parameters": {
            "leader_config": {
                "model": "vllm-ascend/DeepSeek-V3-W8A8",
                "enable_expert_parallel": true,
                "data_parallel_size": 4,
                "data_parallel_size_local": 2,
                "quantization": "ascend",
                "tensor_parallel_size": 8,
                "kv_transfer_config": {},
                "additional_config": {
                    "ascend_scheduler_config": {
                        "enabled": true
                    },
                    "torchair_graph_config": {
                        "enabled": true
                    }
                }
            },
            "worker_config": {
                "model": "vllm-ascend/DeepSeek-V3-W8A8",
                "enable_expert_parallel": true,
                "data_parallel_size": 4,
                "data_parallel_size_local": 2,
                "quantization": "ascend",
                "tensor_parallel_size": 8,
                "kv_transfer_config": {},
                "additional_config": {
                    "ascend_scheduler_config": {
                        "enabled": true
                    },
                    "torchair_graph_config": {
                        "enabled": true
                    }
                }
            }
        },
        "client_parameters": {
            "model": "vllm-ascend/DeepSeek-V3-W8A8",
            "endpoint_type": "vllm",
            "dataset_name": "sharegpt",
            "dataset_path": "/root/.cache/datasets/ShareGPT_V3_unfiltered_cleaned_split.json",
            "num_prompts": 200,
            "request_rate": 1
        },
        "accuracy_parameters": {}
    },
    {
        "test_name": "test_deepseek_pd_llmdatadist",
        "disaggregate_prefill": true,
        "num_nodes": 2,
        "server_parameters": {
            "leader_config": {
                "model": "vllm-ascend/DeepSeek-V3-W8A8",
                "enforce_eager": true,
                "enable_expert_parallel": true,
                "data_parallel_size": 2,
                "data_parallel_size_local": 2,
                "quantization": "ascend",
                "tensor_parallel_size": 8,
                "kv_transfer_config": {
                    "kv_connector": "LLMDataDistCMgrConnector",
                    "kv_buffer_device": "npu",
                    "kv_role": "kv_producer",
                    "kv_connector_module_path": "vllm_ascend.distributed.llmdatadist_c_mgr_connector"
                },
                "additional_config": {}
            },
            "worker_config": {
                "model": "vllm-ascend/DeepSeek-V3-W8A8",
                "enable_expert_parallel": true,
                "data_parallel_size": 2,
                "data_parallel_size_local": 2,
                "quantization": "ascend",
                "tensor_parallel_size": 8,
                "max_num_seqs": 28,
                "kv_transfer_config": {
                    "kv_connector": "LLMDataDistCMgrConnector",
                    "kv_buffer_device": "npu",
                    "kv_role": "kv_consumer",
                    "kv_connector_module_path": "vllm_ascend.distributed.llmdatadist_c_mgr_connector"
                },
                "additional_config": {
                    "torchair_graph_config": {
                        "enabled": true,
                        "graph_batch_size": [28]
                    }
                }
            }
        },
        "client_parameters": {
            "model": "vllm-ascend/DeepSeek-V3-W8A8",
            "endpoint_type": "vllm",
            "dataset_name": "sharegpt",
            "dataset_path": "/root/.cache/datasets/ShareGPT_V3_unfiltered_cleaned_split.json",
            "num_prompts": 200,
            "request_rate": 1
        },
        "accuracy_parameters": {}
    },
    {
        "test_name": "test_qwen_pd_llmdatadist",
        "disaggregate_prefill": true,
        "num_nodes": 2,
        "server_parameters": {
            "leader_config": {
                "model": "vllm-ascend/Qwen3-235B-A22B-W8A8",
                "enforce_eager": true,
                "enable_expert_parallel": true,
                "data_parallel_size": 4,
                "data_parallel_size_local": 4,
                "quantization": "ascend",
                "tensor_parallel_size": 4,
                "kv_transfer_config": {
                    "kv_connector": "LLMDataDistCMgrConnector",
                    "kv_buffer_device": "npu",
                    "kv_role": "kv_producer",
                    "kv_connector_module_path": "vllm_ascend.distributed.llmdatadist_c_mgr_connector"
                },
                "additional_config": {}
            },
            "worker_config": {
                "model": "vllm-ascend/Qwen3-235B-A22B-W8A8",
                "enable_expert_parallel": true,
                "data_parallel_size": 4,
                "data_parallel_size_local": 4,
                "quantization": "ascend",
                "tensor_parallel_size": 4,
                "max_num_seqs": 32,
                "compilation_config": {
                    "cudagraph_capture_sizes": [1,4,8,16,32]
                },
                "kv_transfer_config": {
                    "kv_connector": "LLMDataDistCMgrConnector",
                    "kv_buffer_device": "npu",
                    "kv_role": "kv_consumer",
                    "kv_connector_module_path": "vllm_ascend.distributed.llmdatadist_c_mgr_connector"
                },
                "additional_config": {}
            }
        },
        "client_parameters": {
            "model": "vllm-ascend/Qwen3-235B-A22B-W8A8",
            "endpoint_type": "vllm",
            "dataset_name": "sharegpt",
            "dataset_path": "/root/.cache/datasets/ShareGPT_V3_unfiltered_cleaned_split.json",
            "num_prompts": 200,
            "request_rate": 1
        },
        "accuracy_parameters": {}
    },
    {
        "test_name": "test_deepseek_pd_mooncake",
        "disaggregate_prefill": true,
        "num_nodes": 2,
        "server_parameters": {
            "leader_config": {
                "model": "vllm-ascend/DeepSeek-V3-W8A8",
                "enforce_eager": true,
                "enable_expert_parallel": true,
                "data_parallel_size": 2,
                "data_parallel_size_local": 2,
                "quantization": "ascend",
                "tensor_parallel_size": 8,
                "kv_transfer_config": {
                    "kv_connector": "MooncakeConnector",
                    "kv_role": "kv_producer",
                    "kv_port": "36010",
                    "engine_id": "0",
                    "kv_connector_module_path": "vllm_ascend.distributed.mooncakeconnector",
                    "kv_connector_extra_config": {
                        "use_ascend_direct": true,
                        "prefill": {
                            "dp_size": 2,
                            "tp_size": 8
                        },
                        "decode":{
                            "dp_size": 2,
                            "tp_size": 8
                        }
                    }
                },
                "additional_config": {}
            },
            "worker_config": {
                "model": "vllm-ascend/DeepSeek-V3-W8A8",
                "enable_expert_parallel": true,
                "data_parallel_size": 2,
                "data_parallel_size_local": 2,
                "quantization": "ascend",
                "tensor_parallel_size": 8,
                "max_num_seqs": 28,
                "kv_transfer_config": {
                    "kv_connector": "MooncakeConnector",
                    "kv_role": "kv_consumer",
                    "kv_port": "36010",
                    "engine_id": "0",
                    "kv_connector_module_path": "vllm_ascend.distributed.mooncakeconnector",
                    "kv_connector_extra_config": {
                        "use_ascend_direct": true,
                        "prefill": {
                            "dp_size": 2,
                            "tp_size": 8
                        },
                        "decode":{
                            "dp_size": 2,
                            "tp_size": 8
                        }
                    }
                },
                "additional_config": {
                    "torchair_graph_config": {
                        "enabled": true,
                        "graph_batch_size": [28]
                    }
                }
            }
        },
        "client_parameters": {
            "model": "vllm-ascend/DeepSeek-V3-W8A8",
            "endpoint_type": "vllm",
            "dataset_name": "sharegpt",
            "dataset_path": "/root/.cache/datasets/ShareGPT_V3_unfiltered_cleaned_split.json",
            "num_prompts": 200,
            "request_rate": 1
        },
        "accuracy_parameters": {}
    },
    {
        "test_name": "test_qwen_pd_mooncake",
        "disaggregate_prefill": true,
        "num_nodes": 2,
        "server_parameters": {
            "leader_config": {
                "model": "vllm-ascend/Qwen3-235B-A22B-W8A8",
                "enforce_eager": true,
                "enable_expert_parallel": true,
                "data_parallel_size": 4,
                "data_parallel_size_local": 4,
                "quantization": "ascend",
                "tensor_parallel_size": 4,
                "kv_transfer_config": {
                    "kv_connector": "MooncakeConnector",
                    "kv_role": "kv_consumer",
                    "kv_port": "36010",
                    "engine_id": "0",
                    "kv_connector_module_path": "vllm_ascend.distributed.mooncakeconnector",
                    "kv_connector_extra_config": {
                        "use_ascend_direct": true,
                        "prefill": {
                            "dp_size": 4,
                            "tp_size": 4
                        },
                        "decode":{
                            "dp_size": 4,
                            "tp_size": 4
                        }
                    }
                },
                "additional_config": {}
            },
            "worker_config": {
                "model": "vllm-ascend/Qwen3-235B-A22B-W8A8",
                "enable_expert_parallel": true,
                "data_parallel_size": 4,
                "data_parallel_size_local": 4,
                "quantization": "ascend",
                "tensor_parallel_size": 4,
                "max_num_seqs": 32,
                "compilation_config": {
                    "cudagraph_capture_sizes": [1,4,8,16,32]
                },
                "kv_transfer_config": {
                    "kv_connector": "MooncakeConnector",
                    "kv_role": "kv_consumer",
                    "kv_port": "36010",
                    "engine_id": "0",
                    "kv_connector_module_path": "vllm_ascend.distributed.mooncakeconnector",
                    "kv_connector_extra_config": {
                        "use_ascend_direct": true,
                        "prefill": {
                            "dp_size": 4,
                            "tp_size": 4
                        },
                        "decode":{
                            "dp_size": 4,
                            "tp_size": 4
                        }
                    }
                },
                "additional_config": {}
            }
        },
        "client_parameters": {
            "model": "vllm-ascend/Qwen3-235B-A22B-W8A8",
            "endpoint_type": "vllm",
            "dataset_name": "sharegpt",
            "dataset_path": "/root/.cache/datasets/ShareGPT_V3_unfiltered_cleaned_split.json",
            "num_prompts": 200,
            "request_rate": 1
        },
        "accuracy_parameters": {}
    }
]
